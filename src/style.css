.awesome-squiggle-wave {
	display: block;
	height: 100px;
	overflow: hidden;
	position: relative;
	background-color: transparent !important; /* Container always transparent */
	/* Prevent flash of incorrect sizing */
	min-width: 0; /* Allow shrinking in flex containers */
	box-sizing: border-box;
}

.awesome-squiggle-wave svg {
	display: block;
	width: 100%;
	height: 100%;
}

/* Unified wave animation - applies to all wave types */
.awesome-squiggle-wave .wave-path {
	transform-origin: center;
	animation: var(--animation-name, wave-flow)
		var(--animation-duration, 1.6s) linear infinite;
}

/* Pattern-based wave fill animation */
.awesome-squiggle-wave .wave-fill {
	transform-origin: left center;
	animation: var(--animation-name, wave-flow)
		var(--animation-duration, 1.6s) linear infinite;
}

/* Legacy support: squiggle-path and zigzag-path classes */
.awesome-squiggle-wave .squiggle-path,
.awesome-squiggle-wave .zigzag-path {
	transform-origin: center;
	animation: var(--animation-name, wave-flow)
		var(--animation-duration, 1.6s) linear infinite;
}

/* Paused state for all wave types */
.awesome-squiggle-wave.is-paused .wave-path,
.awesome-squiggle-wave.is-paused .wave-fill,
.awesome-squiggle-wave.is-paused .squiggle-path,
.awesome-squiggle-wave.is-paused .zigzag-path {
	animation-play-state: paused;
}

/* NEW STYLES: shape presets (squiggle, zigzag, lightning) */
.wp-block-separator.is-style-squiggle .wave-path,
.wp-block-separator.is-style-zigzag .wave-path,
.wp-block-separator.is-style-lightning .wave-path,
.wp-block-separator.is-style-squiggle .wave-fill,
.wp-block-separator.is-style-zigzag .wave-fill,
.wp-block-separator.is-style-lightning .wave-fill {
	transform-origin: left center;
	animation: var(--animation-name, wave-flow)
		var(--animation-duration, 1.6s) linear infinite;
}

/* Static state for new styles (when animation is disabled) */
.wp-block-separator.is-style-squiggle.is-paused .wave-path,
.wp-block-separator.is-style-zigzag.is-paused .wave-path,
.wp-block-separator.is-style-lightning.is-paused .wave-path,
.wp-block-separator.is-style-squiggle.is-paused .wave-fill,
.wp-block-separator.is-style-zigzag.is-paused .wave-fill,
.wp-block-separator.is-style-lightning.is-paused .wave-fill {
	animation: none;
}

/* LEGACY STYLES: backwards compatibility with 4-style system */
.wp-block-separator.is-style-animated-squiggle .squiggle-path,
.wp-block-separator.is-style-animated-squiggle .wave-path {
	transform-origin: center;
	animation: var(--animation-name, wave-flow)
		var(--animation-duration, 1.6s) linear infinite;
}

.wp-block-separator.is-style-static-squiggle .squiggle-path,
.wp-block-separator.is-style-static-squiggle .wave-path {
	animation: none;
}

.wp-block-separator.is-style-animated-zigzag .zigzag-path,
.wp-block-separator.is-style-animated-zigzag .wave-path {
	transform-origin: center;
	animation: var(--animation-name, wave-flow)
		var(--animation-duration, 1.6s) linear infinite;
}

.wp-block-separator.is-style-static-zigzag .zigzag-path,
.wp-block-separator.is-style-static-zigzag .wave-path {
	animation: none;
}

/* Frontend-specific selectors to ensure styles apply */
div.wp-block-separator.awesome-squiggle-wave .wave-path,
div.wp-block-separator.awesome-squiggle-wave .wave-fill,
div.wp-block-separator.awesome-squiggle-wave .squiggle-path,
div.wp-block-separator.awesome-squiggle-wave .zigzag-path {
	transform-origin: left center;
	animation: var(--animation-name, wave-flow)
		var(--animation-duration, 1.6s) linear infinite;
}

div.wp-block-separator.awesome-squiggle-wave.is-paused .wave-path,
div.wp-block-separator.awesome-squiggle-wave.is-paused .wave-fill,
div.wp-block-separator.awesome-squiggle-wave.is-paused .squiggle-path,
div.wp-block-separator.awesome-squiggle-wave.is-paused .zigzag-path {
	animation: none;
}

/* Force transparent background for all squiggle containers */
.wp-block-separator.awesome-squiggle-wave {
	background-color: transparent !important; /* Always transparent */
	padding: 0;
	border: none;
	/* Prevent layout flash by ensuring immediate proper sizing */
	transition: none !important; /* Disable any transitions that might cause flash */
}

/* Even when WordPress adds background classes, keep container transparent */
.wp-block-separator.awesome-squiggle-wave.has-background {
	background-color: transparent !important;
}

/* Remove any default border styles that might interfere */
.wp-block-separator.awesome-squiggle-wave.has-background,
.wp-block-separator.awesome-squiggle-wave.has-text-color {
	border: none !important;
}

/* Improved responsive height handling */
.awesome-squiggle-wave,
.wp-block-separator.awesome-squiggle-wave {
	min-height: 50px;
	height: auto;
}

/* ========================================
   FLEX/GRID CONTAINER SUPPORT
   Ensures squiggles display properly inside
   Group, Row, Stack, Grid, and Columns blocks
   ======================================== */

/* Inside Row blocks (horizontal flex) */
.wp-block-group.is-layout-flex .awesome-squiggle-wave,
.wp-block-group.is-layout-flex > .wp-block-separator.awesome-squiggle-wave {
	flex: 1 1 auto;
	min-width: 100px;
	width: auto;
	align-self: center;
}

/* Inside Stack blocks (vertical flex) */
.wp-block-group.is-layout-flow .awesome-squiggle-wave,
.wp-block-group.is-layout-flow > .wp-block-separator.awesome-squiggle-wave {
	width: 100%;
	flex-shrink: 0;
}

/* Inside Grid blocks */
.wp-block-group.is-layout-grid .awesome-squiggle-wave,
.wp-block-group.is-layout-grid > .wp-block-separator.awesome-squiggle-wave {
	width: 100%;
	min-height: 50px;
	justify-self: stretch;
	align-self: center;
}

/* Inside Columns blocks */
.wp-block-column .awesome-squiggle-wave,
.wp-block-column > .wp-block-separator.awesome-squiggle-wave {
	width: 100%;
	flex-shrink: 0;
}

/* SVG scaling inside flex/grid contexts */
.is-layout-flex .awesome-squiggle-wave svg,
.is-layout-grid .awesome-squiggle-wave svg {
	width: 100%;
	height: inherit;
}

/* Ensure the wave path animation works in constrained containers */
.is-layout-flex .awesome-squiggle-wave .wave-path,
.is-layout-flex .awesome-squiggle-wave .wave-fill,
.is-layout-flex .awesome-squiggle-wave .squiggle-path,
.is-layout-flex .awesome-squiggle-wave .zigzag-path,
.is-layout-grid .awesome-squiggle-wave .wave-path,
.is-layout-grid .awesome-squiggle-wave .wave-fill,
.is-layout-grid .awesome-squiggle-wave .squiggle-path,
.is-layout-grid .awesome-squiggle-wave .zigzag-path {
	vector-effect: non-scaling-stroke;
}

/* UNIFIED WAVE ANIMATIONS - 80px = 1 full wave cycle (up + down) for seamless loop */
@keyframes wave-flow {
	0% {
		transform: translateX(0);
	}
	100% {
		transform: translateX(-80px);
	}
}

@keyframes wave-flow-reverse {
	0% {
		transform: translateX(0);
	}
	100% {
		transform: translateX(80px);
	}
}

/* LEGACY ANIMATIONS: kept for backwards compatibility */
@keyframes squiggle-flow {
	0% {
		transform: translateX(0);
	}
	100% {
		transform: translateX(80px);
	}
}

@keyframes squiggle-flow-reverse {
	0% {
		transform: translateX(0);
	}
	100% {
		transform: translateX(-80px);
	}
}

@keyframes zigzag-flow {
	0% {
		transform: translateX(0);
	}
	100% {
		transform: translateX(80px);
	}
}

@keyframes zigzag-flow-reverse {
	0% {
		transform: translateX(0);
	}
	100% {
		transform: translateX(-80px);
	}
}

/* Improved spacing controls support */
.wp-block-separator.awesome-squiggle-wave {
	margin: 1.5em auto; /* Default margin that can be overridden by spacing controls */
}

/* Ensure squiggle respects WordPress separator width settings */
.wp-block-separator.awesome-squiggle-wave.is-style-wide {
    width: 100%;
    max-width: none;
}

/* ========================================
   FULL WIDTH (alignfull) SUPPORT
   Theme-agnostic approach with multiple fallbacks
   ======================================== */

/* Base rule: works for centered containers (classic themes, centered layouts) */
.wp-block-separator.awesome-squiggle-wave.alignfull {
    width: 100vw;
    max-width: 100vw;
    margin-left: calc(50% - 50vw);
    margin-right: calc(50% - 50vw);
}

/* Block themes with global padding: use CSS custom properties */
/* Higher specificity to override base rule when inside padded containers */
.has-global-padding .wp-block-separator.awesome-squiggle-wave.alignfull,
.is-layout-constrained .wp-block-separator.awesome-squiggle-wave.alignfull,
.wp-block-post-content .wp-block-separator.awesome-squiggle-wave.alignfull {
    margin-left: calc(-1 * var(--wp--style--root--padding-left, clamp(1rem, 3vw, 2rem)));
    margin-right: calc(-1 * var(--wp--style--root--padding-right, clamp(1rem, 3vw, 2rem)));
}

/* Direct child of wp-site-blocks: simplest case, standard WP approach */
.wp-site-blocks > .wp-block-separator.awesome-squiggle-wave.alignfull {
    margin-left: calc(50% - 50vw);
    margin-right: calc(50% - 50vw);
}

/* Support for custom widths set via WordPress controls */
.wp-block-separator.awesome-squiggle-wave[style*="width"] {
	max-width: none; /* Allow custom width to take precedence */
}

/* Force transparent background for ALL wave separators (new and legacy styles) */
.wp-block-separator.is-style-squiggle,
.wp-block-separator.is-style-zigzag,
.wp-block-separator.is-style-lightning,
.wp-block-separator.is-style-animated-squiggle,
.wp-block-separator.is-style-animated-zigzag,
.wp-block-separator.is-style-static-squiggle,
.wp-block-separator.is-style-static-zigzag {
	background-color: transparent !important;
	background: transparent !important;
	border: none !important;
}

/* Override WordPress background color classes with extreme specificity */
.wp-block-separator.is-style-squiggle.has-background-color,
.wp-block-separator.is-style-zigzag.has-background-color,
.wp-block-separator.is-style-lightning.has-background-color,
.wp-block-separator.is-style-animated-squiggle.has-background-color,
.wp-block-separator.is-style-animated-zigzag.has-background-color,
.wp-block-separator.is-style-static-squiggle.has-background-color,
.wp-block-separator.is-style-static-zigzag.has-background-color,
.wp-block-separator.is-style-squiggle.has-text-color,
.wp-block-separator.is-style-zigzag.has-text-color,
.wp-block-separator.is-style-lightning.has-text-color,
.wp-block-separator.is-style-animated-squiggle.has-text-color,
.wp-block-separator.is-style-animated-zigzag.has-text-color,
.wp-block-separator.is-style-static-squiggle.has-text-color,
.wp-block-separator.is-style-static-zigzag.has-text-color,
.wp-block-separator.is-style-squiggle[class*="background-color"],
.wp-block-separator.is-style-zigzag[class*="background-color"],
.wp-block-separator.is-style-lightning[class*="background-color"],
.wp-block-separator.is-style-animated-squiggle[class*="background-color"],
.wp-block-separator.is-style-animated-zigzag[class*="background-color"],
.wp-block-separator.is-style-static-squiggle[class*="background-color"],
.wp-block-separator.is-style-static-zigzag[class*="background-color"],
.wp-block-separator.is-style-squiggle[class*="has-background"],
.wp-block-separator.is-style-zigzag[class*="has-background"],
.wp-block-separator.is-style-lightning[class*="has-background"],
.wp-block-separator.is-style-animated-squiggle[class*="has-background"],
.wp-block-separator.is-style-animated-zigzag[class*="has-background"],
.wp-block-separator.is-style-static-squiggle[class*="has-background"],
.wp-block-separator.is-style-static-zigzag[class*="has-background"],
.wp-block-separator.is-style-squiggle[style*="background"],
.wp-block-separator.is-style-zigzag[style*="background"],
.wp-block-separator.is-style-lightning[style*="background"],
.wp-block-separator.is-style-animated-squiggle[style*="background"],
.wp-block-separator.is-style-animated-zigzag[style*="background"],
.wp-block-separator.is-style-static-squiggle[style*="background"],
.wp-block-separator.is-style-static-zigzag[style*="background"] {
	background-color: transparent !important;
	background: transparent !important;
	border: none !important;
}

/* Responsive adjustments */
@media screen and (max-width: 768px) {
	.awesome-squiggle-wave {
		min-height: 60px;
	}
}

@media screen and (max-width: 480px) {
	.awesome-squiggle-wave {
		min-height: 50px;
	}

	/* Reduce wave complexity on very small screens for performance */
	.awesome-squiggle-wave .wave-path,
	.awesome-squiggle-wave .squiggle-path {
		stroke-width: 2px;
	}
}

/* High contrast mode support */
@media (prefers-contrast: high) {
	.awesome-squiggle-wave .wave-path,
	.awesome-squiggle-wave .squiggle-path,
	.awesome-squiggle-wave .zigzag-path {
		stroke-width: 3px;
	}
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
	/* Completely disable animations for motion-sensitive users */
	.awesome-squiggle-wave .wave-path,
	.awesome-squiggle-wave .wave-fill,
	.awesome-squiggle-wave .squiggle-path,
	.awesome-squiggle-wave .zigzag-path {
		animation: none !important;
	}

	/* Provide alternative static visual interest */
	.awesome-squiggle-wave .wave-path,
	.awesome-squiggle-wave .wave-fill,
	.awesome-squiggle-wave .squiggle-path,
	.awesome-squiggle-wave .zigzag-path {
		filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
	}

	/* Legacy static styles */
	.awesome-squiggle-wave.is-style-static-squiggle .squiggle-path,
	.wp-block-separator.is-style-static-squiggle .squiggle-path,
	.awesome-squiggle-wave.is-style-static-zigzag .zigzag-path,
	.wp-block-separator.is-style-static-zigzag .zigzag-path {
		animation: none;
	}
}

/* Add user preference override */
.awesome-squiggle-wave[data-motion-preference="reduce"] .wave-path,
.awesome-squiggle-wave[data-motion-preference="reduce"] .wave-fill,
.awesome-squiggle-wave[data-motion-preference="reduce"] .squiggle-path,
.awesome-squiggle-wave[data-motion-preference="reduce"] .zigzag-path {
	animation: none !important;
}

/* Editor-specific styles */
.wp-block-awesome-squiggle-animated-squiggle-divider {
	margin: 2em 0;
}

/* Hide unstyled separators to prevent flash (legacy and new styles) */
.wp-block-separator.is-style-squiggle:not(.awesome-squiggle-wave),
.wp-block-separator.is-style-zigzag:not(.awesome-squiggle-wave),
.wp-block-separator.is-style-lightning:not(.awesome-squiggle-wave),
.wp-block-separator.is-style-animated-squiggle:not(.awesome-squiggle-wave),
.wp-block-separator.is-style-static-squiggle:not(.awesome-squiggle-wave),
.wp-block-separator.is-style-animated-zigzag:not(.awesome-squiggle-wave),
.wp-block-separator.is-style-static-zigzag:not(.awesome-squiggle-wave) {
	opacity: 0;
	visibility: hidden;
}
